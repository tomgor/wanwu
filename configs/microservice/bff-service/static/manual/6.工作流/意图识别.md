# 意图识别

## 节点概述
核心功能：解读用户的请求，并指挥工作流走上正确的分支，是实现复杂、多功能智能体的必备核心节点。



## 配置指南
*   **模型**
    *   **说明**：可自由选择一个用于意图识别的大模型，以获得最佳效果。
*   **输入**
    *   **说明**：指定需要进行意图识别的文本内容。
    *   **配置**：通常引用开始节点中的 `query` 参数（即用户输入），也可以引用其他前置节点的输出。
*   **意图匹配**
    *   **说明**：定义你的意图分类列表。这是整个节点的核心。
    *   **配置**：
        *   点击 添加意图”，为每个分类起一个**清晰、无歧义**的名称（如 `咨询产品`、`查询订单`、`投诉建议`）。
        *   **关键原则**：意图名称之间应有明确的区分度，避免语义交叉（如 `看电影` 和 `看视频` 就容易混淆），这能极大提高模型的识别准确率。
* **系统提示词**

  * 你可以在这里补充指令，例如：**请特别注意，当用户提到‘退款’、‘退货’时，一律归类为‘售后支持’意图。**

  * **提供示例**：最有效的方法是提供一些用户输入和对应意图的示例。能显著提升模型在复杂场景下的分类能力。例如：

    ```
    咨询产品：你们这个手机怎么充电啊？
    售后支持：我买的衣服不合适，想退掉。
    ```
* **输出**

  *   **说明**：节点执行后产生的结果，可供后续节点引用。
      *   `classificationId`：匹配到的意图ID。按意图列表从上到下，依次为 `1, 2, 3...`。若未匹配任何意图，则为 `0`。
      *   `reason`：模型给出的分类原因。例如，用户说我想听周杰伦的歌”，模型可能会输出 `reason: "用户表达了想听音乐的意图，并指定了歌手周杰伦。"`。这个参数对于调试和优化意图识别非常有帮助。

- **异常处理**
  - **超时时间**：设置一个合理的等待上限，避免工作流无限期卡死。
  - **重试次数**：对于偶发性网络错误，可以设置自动重试。
  - **异常处理方式**：配置一个“备用方案”。当节点异常时，可选择终端流程、返回设定内容、执行异常流程。

![image-20250903120321825](assets/image-20250903120321825.png)

## 典型应用场景

*   **智能客服**：自动识别用户问题是咨询产品、查询订单还是申请售后，并分别引导至产品知识库、订单查询系统或人工客服入口。
*   **医疗咨询**：作为第一道防线，判断用户咨询的是否为医学相关问题。对于非医学问题（如闲聊），可以礼貌拒绝或引导至其他话题，确保专业性和安全性。
*   **多功能综合智能体**：对于一个集成了新闻、天气、日程管理、闲聊等功能的复杂智能体，意图识别节点是总调度台”，负责将用户请求精准地派发给对应的子功能模块。

